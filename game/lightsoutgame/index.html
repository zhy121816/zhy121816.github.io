<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ç†„ç¯æ¸¸æˆ - zhanghy16çš„ä¸»é¡µ</title>
    <link rel="icon" type="image/x-icon" href="../../image/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
        <style>
        .light {
            transition: background-color 0.3s;
            cursor: pointer;
        }
        .disabled {
            pointer-events: none;
            opacity: 0.7;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .win-text {
            animation: bounce 1s infinite;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .brain-power-increase {
            animation: fadeIn 0.5s ease-in;
            position: absolute;
            color: #8B5CF6;
            font-weight: bold;
            pointer-events: none;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
        }
        .edit-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 8px 16px;
            background: #8B5CF6;
            color: white;
            border-radius: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        #medalsContainer {
            display: none;
            text-align: center;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-8">
    <div id="researchModal" class="modal">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-4">è¿›å…¥ç ”ç©¶æ¨¡å¼</h3>
            <input type="password" id="researchPassword" class="w-full px-4 py-2 border rounded-lg mb-4" placeholder="è¯·è¾“å…¥ç ”ç©¶æ¨¡å¼å¯†ç ">
            <div class="flex justify-end gap-2">
                <button onclick="closeResearchModal()" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">å–æ¶ˆ</button>
                <button onclick="verifyResearchPassword()" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">ç¡®è®¤</button>
            </div>
        </div>
    </div>

    <div class="mb-8 space-y-4">
        <h1 class="text-3xl font-bold text-center text-gray-800">ç†„ç¯æ¸¸æˆ</h1>
        <div class="text-center space-y-1">
            <div class="text-xl font-bold text-purple-600">å½“å‰è„‘åŠ›å€¼ï¼š<span id="brainPower">0</span></div>
        </div>
        <div id="researchModeHint" class="hidden text-center text-sm text-yellow-600 font-semibold">ç ”ç©¶æ¨¡å¼ä¸‹ç†„ç¯æˆåŠŸä¸åŠ è„‘åŠ›å€¼</div>
        <div id="controls" class="flex gap-4 justify-center">
            <select id="size" class="px-4 py-2 border rounded-lg"></select>
            <button id="random" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">éšæœºå¸ƒå±€</button>
            <button id="lightAll" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">å…¨éƒ¨äº®èµ·</button>
            <button id="researchMode" class="px-4 py-2 bg-gradient-to-r from-gray-500 to-yellow-500 text-white rounded-lg hover:opacity-90">è¿›å…¥ç ”ç©¶æ¨¡å¼</button>
            <button id="editMode" class="px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 hidden">ç¼–è¾‘æ¨¡å¼</button>
            <button id="viewMedals" class="px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600">æŸ¥çœ‹å¥–ç« </button>
        </div>
    </div>

    <div id="editIndicator" class="edit-indicator hidden">ç¼–è¾‘æ¨¡å¼ä¸­</div>

    <div id="gameContainer" class="flex flex-col items-center gap-4">
        <div class="text-lg font-semibold text-gray-700 mb-2">ç‚¹å‡»æ¬¡æ•°ï¼š<span id="clickCount" class="text-blue-600">0</span></div>
        <div id="board" class="grid gap-1 bg-gray-200 p-2 rounded-lg"></div>
        <div id="winMessage" class="hidden">
            <div class="text-2xl font-bold text-green-600 my-4 win-text">ğŸ‰ ä½ èµ¢äº†ï¼ğŸ‰<br><span class="text-xl text-purple-600">è·å¾—è„‘åŠ›å€¼ +<span id="reward"></span></span></div>
        </div>
        <button id="restart" class="hidden px-6 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 text-xl">é‡æ–°å¼€å§‹</button>
        <div id="allOffMessage" class="hidden text-2xl font-bold text-red-600 my-4">ç¯å…¨ç­äº†ï¼</div>
        <div id="exitEditWarning" class="hidden text-2xl font-bold text-red-600 my-4">ä¸èƒ½ç¼–è¾‘æˆå…¨ç­æ£‹ç›˜ï¼</div>
    </div>

    <!-- æ¸¸æˆç©æ³•è¯´æ˜ -->
    <div id="gameInstructions" class="mt-8 max-w-2xl bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-bold text-gray-800 mb-4">æ¸¸æˆç©æ³•è¯´æ˜</h2>
        <ul class="space-y-3 text-gray-700">
            <li class="flex items-start"><span class="text-blue-500 mr-2">â€¢</span><span><strong>æ¸¸æˆç›®æ ‡ï¼š</strong>é€šè¿‡ç‚¹å‡»ä½¿æ‰€æœ‰æ ¼å­å˜æˆç°è‰²ï¼ˆç†„ç­çŠ¶æ€ï¼‰ã€‚</span></li>
            <li class="flex items-start"><span class="text-blue-500 mr-2">â€¢</span><span><strong>åŸºæœ¬è§„åˆ™ï¼š</strong>ç‚¹å‡»ä¸€ä¸ªæ ¼å­æ—¶ï¼Œè¯¥æ ¼å­åŠå…¶ä¸Šã€ä¸‹ã€å·¦ã€å³ç›¸é‚»çš„æ ¼å­éƒ½ä¼šæ”¹å˜çŠ¶æ€ï¼ˆäº®å˜ç­ï¼Œç­å˜äº®ï¼‰ã€‚</span></li>
            <li class="flex items-start"><span class="text-blue-500 mr-2">â€¢</span><span><strong>è„‘åŠ›å€¼å¥–åŠ±ï¼š</strong></span></li>
            <ul class="ml-6 space-y-2">
                <li>3x3: +1 è„‘åŠ›å€¼</li>
                <li>4x4: +2 è„‘åŠ›å€¼</li>
                <li>5x5: +5 è„‘åŠ›å€¼</li>
                <li>6x6: +15 è„‘åŠ›å€¼</li>
                <li>7x7: +20 è„‘åŠ›å€¼</li>
                <li>8x8: +50 è„‘åŠ›å€¼</li>
                <li>9x9: +100 è„‘åŠ›å€¼</li>
                <li>10x10: +1000 è„‘åŠ›å€¼</li>
            </ul>
        </ul>
    </div>

    <!-- å…‘æ¢ç³»ç»Ÿ -->
    <div class="mt-8 max-w-2xl bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-bold text-gray-800 mb-4">å…‘æ¢å¥–ç« </h2>
        <div class="flex flex-col mb-4">
            <span>å¯ç”¨è„‘åŠ›å€¼ï¼š<span id="exchangeBrainPowerDisplay">0</span></span>
            <button id="exchangeReward1" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">åˆè¯•èº«æ‰‹å¥–ç« </button>
            <button id="exchangeReward2" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">è„‘åŠ›é«˜æ‰‹å¥–ç« </button>
            <button id="exchangeReward3" class="mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">è„‘åŠ›å¤§å¸ˆå¥–ç« </button>
        </div>
        <div class="text-gray-700">
            <p>åˆè¯•èº«æ‰‹å¥–ç«  - æ‰€éœ€è„‘åŠ›å€¼: 20</p>
            <p>è„‘åŠ›é«˜æ‰‹å¥–ç«  - æ‰€éœ€è„‘åŠ›å€¼: 500</p>
            <p>è„‘åŠ›å¤§å¸ˆå¥–ç«  - æ‰€éœ€è„‘åŠ›å€¼: 2000</p>
        </div>
    </div>

    <!-- å¥–ç« å±•ç¤ºåŒºåŸŸ -->
    <div id="medalsContainer">
        <h2 class="text-2xl font-bold mb-4">è·å¾—çš„å¥–ç« </h2>
        <div id="medalsList"></div>
        <button id="backToGame" class="mt-4 px-4 py-2 bg-gray-800 text-white rounded-lg">è¿”å›æ¸¸æˆ</button>
    </div>

    <script>
        alert("è¿™ä¸ªæ¸¸æˆç”±AIç”Ÿæˆ");
        class LightsOutGame {
            constructor(size) {
                this.size = size;
                this.board = Array(size).fill().map(() => Array(size).fill(false));
                this.clicks = 0;
                this.brainPower = parseInt(localStorage.getItem('brainPower')) || 0;
                this.medals = JSON.parse(localStorage.getItem('medals')) || {};
                this.redeemedRewards = JSON.parse(localStorage.getItem('redeemedRewards')) || {};
                this.isResearchMode = false; // æ˜¯å¦å¤„äºç ”ç©¶æ¨¡å¼
                this.isEditMode = false;     // æ˜¯å¦å¤„äºç¼–è¾‘æ¨¡å¼
                this.updateBrainPower();
                this.createBoard();
                this.updateClickCount();
                this.updateSizeOptions();
                this.updateExchangeDisplay();
                this.updateMedalsDisplay();
            }

            createBoard() {
                const board = document.getElementById('board');
                board.style.gridTemplateColumns = `repeat(${this.size}, 1fr)`;
                board.innerHTML = '';

                // é‡ç½® board æ•°ç»„
                this.board = Array(this.size).fill().map(() => Array(this.size).fill(false));

                for (let i = 0; i < this.size; i++) {
                    for (let j = 0; j < this.size; j++) {
                        const light = document.createElement('div');
                        light.className = 'light w-16 h-16 bg-gray-600 rounded-lg cursor-pointer';
                        light.onclick = () => this.toggleLights(i, j);
                        board.appendChild(light);
                    }
                }
            }

            // å…‘æ¢å¥–åŠ±çš„åŠŸèƒ½
            exchangeReward(rewardId, requiredPower) {
                if (this.redeemedRewards[rewardId]) {
                    alert('è¯¥å¥–åŠ±å·²ç»è¢«å…‘æ¢è¿‡ï¼');
                    return;
                }

                if (this.brainPower >= requiredPower) {
                    this.brainPower -= requiredPower; // æ‰£é™¤ç›¸åº”çš„è„‘åŠ›å€¼
                    this.redeemedRewards[rewardId] = true; // æ ‡è®°ä¸ºå·²å…‘æ¢
                    localStorage.setItem('redeemedRewards', JSON.stringify(this.redeemedRewards)); // ä¿å­˜çŠ¶æ€
                    alert(`å¥–åŠ± ${rewardId} å·²æˆåŠŸå…‘æ¢ï¼`);
                    this.updateBrainPower(); // æ›´æ–°è„‘åŠ›å€¼æ˜¾ç¤º
                    this.updateMedals(rewardId); // æ›´æ–°å¥–ç« 
                } else {
                    alert('è„‘åŠ›å€¼ä¸è¶³ï¼Œæ— æ³•å…‘æ¢å¥–åŠ±ï¼');
                }
            }

            // æ›´æ–°å¥–ç« 
            updateMedals(rewardId) {
                this.medals[rewardId] = true; // æ·»åŠ å¥–ç« 
                localStorage.setItem('medals', JSON.stringify(this.medals)); // ä¿å­˜çŠ¶æ€
                this.updateMedalsDisplay(); // æ›´æ–°æ˜¾ç¤º
            }

            // å±•ç¤ºå¥–ç« 
            updateMedalsDisplay() {
                const medalsList = document.getElementById('medalsList');
                medalsList.innerHTML = ''; // æ¸…ç©ºå½“å‰æ˜¾ç¤º

                for (const medal in this.medals) {
                    if (this.medals[medal]) {
                        const medalItem = document.createElement('div');
                        medalItem.textContent = `è·å¾—äº†å¥–ç« ï¼š${medal}`;
                        medalsList.appendChild(medalItem);
                    }
                }
            }

            toggleLights(row, col) {
                // ç¼–è¾‘æ¨¡å¼ï¼šåªåˆ‡æ¢å½“å‰ç‚¹å‡»çš„ç¯ï¼Œå¹¶æ£€æµ‹æ˜¯å¦å˜æˆå…¨é»‘
                if (this.isEditMode) {
                    const previousState = JSON.parse(JSON.stringify(this.board));
                    this.board[row][col] = !this.board[row][col];
                    this.updateLight(row, col);

                    // ä¿ç•™å…¨ç­é™åˆ¶ï¼šè‹¥æœ¬æ¬¡ç‚¹å‡»å¯¼è‡´å…¨ç­ï¼Œå–æ¶ˆæœ¬æ¬¡æ“ä½œ
                    if (this.isAllLightsOff()) {
                        alert("ä¸å¯ä»¥æ”¹æˆå…¨é»‘æ£‹ç›˜ï¼");
                        this.board = previousState;
                        this.updateLight(row, col);
                    }
                    return;
                }

                // æ™®é€šæ¨¡å¼ï¼šç‚¹å‡»ä¸€ä¸ªæ ¼å­æ—¶ï¼Œå®ƒå’Œä¸Šä¸‹å·¦å³ä¸€èµ·åˆ‡æ¢
                this.clicks++;
                this.updateClickCount();

                const positions = [
                    [row, col],
                    [row - 1, col],
                    [row + 1, col],
                    [row, col - 1],
                    [row, col + 1]
                ];

                positions.forEach(([r, c]) => {
                    if (r >= 0 && r < this.size && c >= 0 && c < this.size) {
                        this.board[r][c] = !this.board[r][c];
                        this.updateLight(r, c);
                    }
                });

                this.checkWin();
            }

            isAllLightsOff() {
                return this.board.every(row => row.every(cell => !cell));
            }

            toggleEditMode() {
                if (!this.isResearchMode) return;

                if (!this.isEditMode) {
                    this.isEditMode = true;
                    this.board = Array(this.size).fill().map(() => Array(this.size).fill(false));
                    for (let i = 0; i < this.size; i++) {
                        for (let j = 0; j < this.size; j++) {
                            this.updateLight(i, j);
                        }
                    }
                    document.getElementById('editMode').textContent = "é€€å‡ºç¼–è¾‘";
                    document.getElementById('editIndicator').classList.remove('hidden');
                    document.getElementById('researchMode').disabled = true;
                    document.getElementById('researchMode').classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    if (this.isAllLightsOff()) {
                        document.getElementById('exitEditWarning').classList.remove('hidden');
                        return;
                    }
                    this.isEditMode = false;
                    document.getElementById('editMode').textContent = "ç¼–è¾‘æ¨¡å¼";
                    document.getElementById('editIndicator').classList.add('hidden');
                    document.getElementById('exitEditWarning').classList.add('hidden');
                    document.getElementById('researchMode').disabled = false;
                    document.getElementById('researchMode').classList.remove('opacity-50', 'cursor-not-allowed');
                }
            }

            updateLight(row, col) {
                const index = row * this.size + col;
                const light = document.getElementById('board').children[index];
                light.style.backgroundColor = this.board[row][col] ? '#FCD34D' : '#4B5563';
            }

            checkWin() {
                const allOff = this.isAllLightsOff();
                if (allOff) {
                    if (this.isResearchMode) {
                        document.getElementById('allOffMessage').classList.remove('hidden');
                        document.getElementById('restart').classList.remove('hidden');
                        document.getElementById('board').classList.add('disabled');
                        document.getElementById('controls').classList.add('disabled');
                    } else {
                        const reward = this.getBrainPowerReward();
                        this.brainPower += reward;
                        this.updateBrainPower();
                        this.showBrainPowerIncrease(reward);
                        document.getElementById('board').classList.add('disabled');
                        document.getElementById('controls').classList.add('disabled');
                        document.getElementById('restart').classList.remove('hidden');
                        document.getElementById('winMessage').classList.remove('hidden');
                        document.getElementById('reward').textContent = reward;
                    }
                }
            }

            randomize() {
                this.clicks = 0;
                this.updateClickCount();

                for (let i = 0; i < this.size; i++) {
                    for (let j = 0; j < this.size; j++) {
                        this.board[i][j] = false;
                        this.updateLight(i, j);
                    }
                }

                const minClicks = this.size;
                const maxAdditionalClicks = this.size * this.size;
                const totalClicks = minClicks + Math.floor(Math.random() * maxAdditionalClicks);
                for (let i = 0; i < totalClicks; i++) {
                    const row = Math.floor(Math.random() * this.size);
                    const col = Math.floor(Math.random() * this.size);
                    this.toggleRandomLights(row, col);
                }

                if (this.isAllLightsOff()) {
                    const lightsToTurnOn = Math.floor(this.size * this.size / 3);
                    for (let i = 0; i < lightsToTurnOn; i++) {
                        const randomRow = Math.floor(Math.random() * this.size);
                        const randomCol = Math.floor(Math.random() * this.size);
                        if (!this.board[randomRow][randomCol]) {
                            this.board[randomRow][randomCol] = true;
                            this.updateLight(randomRow, randomCol);
                        }
                    }
                }

                document.getElementById('winMessage').classList.add('hidden');
                document.getElementById('restart').classList.add('hidden');
                document.getElementById('allOffMessage').classList.add('hidden');
                document.getElementById('exitEditWarning').classList.add('hidden');
                document.getElementById('board').classList.remove('disabled');
                document.getElementById('controls').classList.remove('disabled');
                this.updateExchangeDisplay(); // æ›´æ–°å…‘æ¢æ˜¾ç¤º
            }

            toggleRandomLights(row, col) {
                const positions = [
                    [row, col],
                    [row - 1, col],
                    [row + 1, col],
                    [row, col - 1],
                    [row, col + 1]
                ];
                positions.forEach(([r, c]) => {
                    if (r >= 0 && r < this.size && c >= 0 && c < this.size) {
                        this.board[r][c] = !this.board[r][c];
                        this.updateLight(r, c);
                    }
                });
            }

            lightAll() {
                this.clicks = 0;
                this.updateClickCount();
                for (let i = 0; i < this.size; i++) {
                    for (let j = 0; j < this.size; j++) {
                        this.board[i][j] = true;
                        this.updateLight(i, j);
                    }
                }
                document.getElementById('winMessage').classList.add('hidden');
                document.getElementById('restart').classList.add('hidden');
                document.getElementById('allOffMessage').classList.add('hidden');
                document.getElementById('exitEditWarning').classList.add('hidden');
                document.getElementById('board').classList.remove('disabled');
                document.getElementById('controls').classList.remove('disabled');
            }

            restart() {
                document.getElementById('board').classList.remove('disabled');
                document.getElementById('controls').classList.remove('disabled');
                document.getElementById('restart').classList.add('hidden');
                document.getElementById('winMessage').classList.add('hidden');
                document.getElementById('allOffMessage').classList.add('hidden');
                document.getElementById('exitEditWarning').classList.add('hidden');
                this.clicks = 0;
                this.updateClickCount();
                this.board = Array(this.size).fill().map(() => Array(this.size).fill(false));
                this.randomize();
            }

            enterResearchMode() {
                this.isResearchMode = true;
                this.isEditMode = false;
                document.getElementById('researchModeHint').classList.remove('hidden');
                this.size = 3;
                this.updateSizeOptions();
                this.createBoard();
                this.randomize();
                document.getElementById('editMode').classList.remove('hidden');
                document.getElementById('researchMode').textContent = "é€€å‡ºç ”ç©¶æ¨¡å¼";
            }

            exitResearchMode() {
                this.isResearchMode = false;
                this.isEditMode = false;
                document.getElementById('researchModeHint').classList.add('hidden');
                this.size = 3;
                this.updateSizeOptions();
                this.createBoard();
                this.randomize();
                document.getElementById('editMode').classList.add('hidden');
                document.getElementById('researchMode').textContent = "è¿›å…¥ç ”ç©¶æ¨¡å¼";
            }

            showBrainPowerIncrease(reward) {
                const element = document.createElement('div');
                element.className = 'brain-power-increase';
                element.textContent = `+${reward}`;
                element.style.left = `${Math.random() * 200 + 100}px`;
                element.style.top = `${Math.random() * 100 + 100}px`;
                document.body.appendChild(element);

                setTimeout(() => {
                    element.style.opacity = '0';
                    setTimeout(() => {
                        document.body.removeChild(element);
                    }, 500);
                }, 1000);
            }

            getBrainPowerReward() {
                const rewards = {
                    3: 1,
                    4: 2,
                    5: 5,
                    6: 15,
                    7: 20,
                    8: 50,
                    9: 100,
                    10: 1000
                };
                return rewards[this.size] || 0;
            }

            updateClickCount() {
                document.getElementById('clickCount').textContent = this.clicks;
            }

            updateBrainPower() {
                document.getElementById('brainPower').textContent = this.brainPower;
                localStorage.setItem('brainPower', this.brainPower.toString());
                this.updateExchangeDisplay(); // æ›´æ–°å…‘æ¢æ˜¾ç¤º
            }

            updateSizeOptions() {
                const sizeSelect = document.getElementById('size');
                sizeSelect.innerHTML = '';
                const maxSize = this.isResearchMode ? 30 : 10;
                for (let i = 3; i <= maxSize; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = `${i}x${i}`;
                    sizeSelect.appendChild(option);
                }
                sizeSelect.value = this.size;
            }

            updateExchangeDisplay() {
                document.getElementById('exchangeBrainPowerDisplay').textContent = this.brainPower; 
            }
        }

        // å®ä¾‹åŒ–æ¸¸æˆ
        let game = new LightsOutGame(3);

        document.getElementById('exchangeReward1').onclick = () => game.exchangeReward('åˆè¯•èº«æ‰‹', 20);
        document.getElementById('exchangeReward2').onclick = () => game.exchangeReward('è„‘åŠ›é«˜æ‰‹', 500);
        document.getElementById('exchangeReward3').onclick = () => game.exchangeReward('è„‘åŠ›å¤§å¸ˆ', 2000);
        
        // ç ”ç©¶æ¨¡å¼ç›¸å…³å‡½æ•°
        function showResearchModal() {
            document.getElementById('researchModal').style.display = 'block';
            document.getElementById('researchPassword').value = '';
        }

        function closeResearchModal() {
            document.getElementById('researchModal').style.display = 'none';
        }

        function verifyResearchPassword() {
            const password = document.getElementById('researchPassword').value;
            const encodedPassword = btoa(password); // ä½¿ç”¨btoa()è¿›è¡ŒBase64ç¼–ç 

            const correctEncodedPassword = "eGlkZW5nR2FtZV9MT0dS";
            
            if (encodedPassword === correctEncodedPassword) {
                game.enterResearchMode();
                closeResearchModal();
            } else {
                alert('å¯†ç é”™è¯¯ï¼');
            }
        }

        document.addEventListener('keydown', function(event) {
            if (event.ctrlKey && event.key === 's') {
                event.preventDefault();
                alert('ä¿å­˜åŠŸèƒ½å·²è¢«ç¦ç”¨ã€‚');
            }
        });

        document.getElementById('size').onchange = (e) => {
            const newSize = parseInt(e.target.value);
            game.size = newSize;
            game.createBoard();
            game.randomize();
        };

        document.getElementById('random').onclick = () => game.randomize();
        document.getElementById('lightAll').onclick = () => game.lightAll();
        document.getElementById('restart').onclick = () => game.restart();
        document.getElementById('researchMode').onclick = () => {
            if (game.isResearchMode) {
                if (!game.isEditMode) {
                    game.exitResearchMode();
                }
            } else {
                showResearchModal();
            }
        };
        document.getElementById('editMode').onclick = () => game.toggleEditMode();

        // æ–°å¢æŸ¥çœ‹å¥–ç« çš„äº‹ä»¶
        document.getElementById('viewMedals').onclick = () => {
            document.getElementById('medalsContainer').style.display = 'block';
            document.getElementById('gameContainer').style.display = 'none';  // éšè—æ¸¸æˆç•Œé¢
            document.getElementById('gameInstructions').style.display = 'none';  // éšè—æ¸¸æˆç©æ³•è¯´æ˜
            document.getElementById('controls').style.display = 'none';  // éšè—æ§åˆ¶é¢æ¿
            document.getElementById('exchangeReward1').style.display = 'block'; // ä¿ç•™å…‘æ¢é¡µé¢
            document.getElementById('exchangeReward2').style.display = 'block'; // ä¿ç•™å…‘æ¢é¡µé¢
            document.getElementById('exchangeReward3').style.display = 'block'; // ä¿ç•™å…‘æ¢é¡µé¢
        };

        // è¿”å›æ¸¸æˆæŒ‰é’®
        document.getElementById('backToGame').onclick = () => {
            document.getElementById('medalsContainer').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'flex';
            document.getElementById('gameInstructions').style.display = 'block';  // æ¢å¤æ¸¸æˆç©æ³•è¯´æ˜
            document.getElementById('controls').style.display = 'flex';
            document.getElementById('exchangeReward1').style.display = 'block'; // ç¡®ä¿å…‘æ¢é¡µé¢å¯è§
            document.getElementById('exchangeReward2').style.display = 'block'; // ç¡®ä¿å…‘æ¢é¡µé¢å¯è§
            document.getElementById('exchangeReward3').style.display = 'block'; // ç¡®ä¿å…‘æ¢é¡µé¢å¯è§
        };

        // åˆå§‹åŒ–
        game.randomize();
    </script>
</body>
</html>