<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åä½œå¼Šæ£€æµ‹æµ‹è¯• - zhanghy16çš„ä¸»é¡µ</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
    }
    .test-section {
      margin: 20px 0;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    .test-section h3 {
      margin-top: 0;
      color: #555;
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      cursor: pointer;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 14px;
    }
    button:hover {
      background-color: #45a049;
    }
    button.danger {
      background-color: #f44336;
    }
    button.danger:hover {
      background-color: #da190b;
    }
    .status {
      margin-top: 10px;
      padding: 10px;
      border-radius: 4px;
      font-weight: bold;
    }
    .status.safe {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .status.detected {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    .code-block {
      background-color: #f4f4f4;
      padding: 10px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      margin: 10px 0;
      font-size: 13px;
    }
    .info {
      background-color: #d1ecf1;
      color: #0c5460;
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ›¡ï¸ åä½œå¼Šæ£€æµ‹ç³»ç»Ÿæµ‹è¯•</h1>
    
    <div class="info">
      <strong>æµ‹è¯•è¯´æ˜ï¼š</strong>æœ¬é¡µé¢ç”¨äºæµ‹è¯•åä½œå¼Šç³»ç»Ÿæ˜¯å¦èƒ½æ­£ç¡®æ£€æµ‹å„ç§ä½œå¼Šè¡Œä¸ºã€‚<br>
      æµè§ˆå™¨ï¼š<span id="browser-info"></span>
    </div>

    <div class="test-section">
      <h3>å½“å‰æ£€æµ‹çŠ¶æ€</h3>
      <div id="status" class="status safe">æ­£åœ¨åˆå§‹åŒ–...</div>
      <button onclick="checkStatus()">åˆ·æ–°çŠ¶æ€</button>
    </div>

    <div class="test-section">
      <h3>æµ‹è¯•1ï¼šç›´æ¥ä¿®æ”¹æ¸¸æˆæ•°å€¼</h3>
      <p>æµ‹è¯•åœ¨æ§åˆ¶å°è¾“å…¥ä»¥ä¸‹å‘½ä»¤èƒ½å¦è¢«æ£€æµ‹ï¼š</p>
      <div class="code-block">game.money = 999999</div>
      <button class="danger" onclick="testDirectModification()">æ‰§è¡Œæµ‹è¯•ï¼ˆä½œå¼Šè¡Œä¸ºï¼‰</button>
      <p><small>æç¤ºï¼šä¹Ÿå¯ä»¥æ‰‹åŠ¨åœ¨æ§åˆ¶å°è¾“å…¥ä¸Šè¿°å‘½ä»¤æµ‹è¯•</small></p>
    </div>

    <div class="test-section">
      <h3>æµ‹è¯•2ï¼šä¿®æ”¹åµŒå¥—å±æ€§</h3>
      <p>æµ‹è¯•ä¿®æ”¹å­¦ç”ŸæŠ€èƒ½å€¼ï¼š</p>
      <div class="code-block">game.students[0].skills.algorithm = 9999</div>
      <button class="danger" onclick="testNestedModification()">æ‰§è¡Œæµ‹è¯•ï¼ˆä½œå¼Šè¡Œä¸ºï¼‰</button>
    </div>

    <div class="test-section">
      <h3>æµ‹è¯•3ï¼šä½¿ç”¨ eval æ‰§è¡Œä»£ç </h3>
      <div class="code-block">eval("game.reputation = 1000")</div>
      <button class="danger" onclick="testEval()">æ‰§è¡Œæµ‹è¯•ï¼ˆä½œå¼Šè¡Œä¸ºï¼‰</button>
    </div>

    <div class="test-section">
      <h3>æµ‹è¯•4ï¼šä¿®æ”¹ localStorage</h3>
      <div class="code-block">localStorage.setItem('game_save', '...')</div>
      <button class="danger" onclick="testLocalStorage()">æ‰§è¡Œæµ‹è¯•ï¼ˆä½œå¼Šè¡Œä¸ºï¼‰</button>
    </div>

    <div class="test-section">
      <h3>æµ‹è¯•5ï¼šæ­£å¸¸æ¸¸æˆæ“ä½œï¼ˆåº”è¯¥ä¸è¢«æ£€æµ‹ï¼‰</h3>
      <button onclick="testNormalOperation()">æ‰§è¡Œæ­£å¸¸æ“ä½œ</button>
      <p><small>æ­£å¸¸æ“ä½œä¸åº”è¯¥è§¦å‘æ£€æµ‹</small></p>
    </div>

    <div class="test-section">
      <h3>æ¸¸æˆçŠ¶æ€</h3>
      <div id="game-state" style="font-family: monospace; font-size: 12px;"></div>
      <button onclick="updateGameState()">åˆ·æ–°æ¸¸æˆçŠ¶æ€</button>
    </div>
  </div>

  <script>
    // æ¨¡æ‹Ÿæ¸¸æˆå¯¹è±¡
    function GameState() {
      this.money = 1000;
      this.reputation = 50;
      this.students = [
        {
          name: 'æµ‹è¯•å­¦ç”Ÿ',
          skills: {
            algorithm: 60,
            dataStructure: 55,
            math: 70
          }
        }
      ];
    }

    // åˆå§‹åŒ–æ¸¸æˆ
    window.game = new GameState();

    // æ˜¾ç¤ºæµè§ˆå™¨ä¿¡æ¯
    document.getElementById('browser-info').textContent = navigator.userAgent;

    // æ£€æŸ¥çŠ¶æ€
    function checkStatus() {
      const statusEl = document.getElementById('status');
      statusEl.className = 'status safe';
      statusEl.innerHTML = `
        â„¹ï¸ <strong>åä½œå¼Šæ¨¡å—å·²ç§»é™¤</strong><br>
        æ­¤æµ‹è¯•é¡µé¢ä¸å†å¯ç”¨
      `;
    }

    // æµ‹è¯•1ï¼šç›´æ¥ä¿®æ”¹
    function testDirectModification() {
      console.log('=== åä½œå¼Šæ¨¡å—å·²ç§»é™¤ ===');
      alert('åä½œå¼Šæ¨¡å—å·²è¢«ç§»é™¤ï¼Œæ­¤æµ‹è¯•ä¸å†å¯ç”¨');
    }

    // æµ‹è¯•2ï¼šåµŒå¥—å±æ€§ä¿®æ”¹
    function testNestedModification() {
      console.log('=== åä½œå¼Šæ¨¡å—å·²ç§»é™¤ ===');
      alert('åä½œå¼Šæ¨¡å—å·²è¢«ç§»é™¤ï¼Œæ­¤æµ‹è¯•ä¸å†å¯ç”¨');
    }

    // æµ‹è¯•3ï¼ševal
    function testEval() {
      console.log('=== æµ‹è¯•3ï¼šä½¿ç”¨ eval ===');
      eval("game.reputation = 1000");
      console.log('å·²ä½¿ç”¨ eval ä¿®æ”¹ game.reputation = 1000');
      setTimeout(checkStatus, 500);
    }

    // æµ‹è¯•4ï¼šlocalStorage
    function testLocalStorage() {
      console.log('=== æµ‹è¯•4ï¼šä¿®æ”¹ localStorage ===');
      localStorage.setItem('game_test', JSON.stringify({money: 999999}));
      console.log('å·²ä¿®æ”¹ localStorage');
      setTimeout(checkStatus, 500);
    }

    // æµ‹è¯•5ï¼šæ­£å¸¸æ“ä½œ
    function testNormalOperation() {
      console.log('=== æµ‹è¯•5ï¼šæ­£å¸¸æ¸¸æˆæ“ä½œ ===');
      console.log('=== åä½œå¼Šæ¨¡å—å·²ç§»é™¤ ===');
      alert('åä½œå¼Šæ¨¡å—å·²è¢«ç§»é™¤ï¼Œæ­¤æµ‹è¯•ä¸å†å¯ç”¨');
    }

    function normalGameFunction() {
      // æ¨¡æ‹Ÿæ­£å¸¸çš„æ¸¸æˆå‡½æ•°ä¿®æ”¹æ•°å€¼
      window.game.money += 100;
      window.game.reputation += 1;
      console.log('æ­£å¸¸æ“ä½œï¼šé‡‘é’±+100, å£°èª‰+1');
    }

    // æ›´æ–°æ¸¸æˆçŠ¶æ€æ˜¾ç¤º
    function updateGameState() {
      const stateEl = document.getElementById('game-state');
      stateEl.textContent = JSON.stringify(window.game, null, 2);
    }

    // åˆå§‹åŒ–
    setTimeout(() => {
      console.log('åä½œå¼Šæ¨¡å—å·²è¢«ç§»é™¤');
      console.log('å½“å‰æµè§ˆå™¨:', navigator.userAgent);
      checkStatus();
      updateGameState();
    }, 500);
  </script>
</body>
</html>
